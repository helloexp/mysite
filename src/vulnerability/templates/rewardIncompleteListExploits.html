{% extends "reward.html" %}

{% block siderbar %} 
    list[2].classList.add('active')
{% endblock %}

{% block rewardContent %}
<h2 class="page-header">Vulnerabilities with incomplete exploit infomation:</h2>
{%if errors%}
    {%for error in errors%}
        <p style="color:red">{{error}}</p>
    {%endfor%}
{%endif%}
<p>There are <strong>{{pageInfo.sum}} </strong>Vulnerabilities records.</p>
<p>Displaying matches {{pageInfo.curIndex}} through {{pageInfo.endIndex}}.</p>
<div class="table-responsive">
    <table class="table table-striped">
        {%if vulnerabilities%}
        <thead>
            <tr>
                <th style="width: 25%;">CVE</th>
                <th>To Reward</th>
            </tr>
        </thead>
        <tbody>
            {% for vuln in vulnerabilities %}
            <form action="" method="post" enctype="multipart/form-data">{% csrf_token %}
                <div class="form-group">
                    <tr>
                    <td><a href="/detail/?q={{vuln.cve_id}}">{{ vuln.cve_id }}</a></td>
                    <td>
                    <a href="/Reward/incompleteList/exploitsAdd/?cveid={{vuln.cve_id}}"><span class="glyphicon glyphicon-plus"></span></a>
                    </td>
                    </tr>
                </div>
            </form>
            {%endfor%}
        </tbody>
        {%endif%}
    </table>
</div>

<nav class="text-center">
  <ul class="pagination pagination-sm">
    <li>
      <a href="/Reward/incompleteList/exploits/?startIndex=0" aria-label="Previous">
        <span aria-hidden="true">&laquo;</span>
      </a>
    </li>   
    {%for pageNum in pageInfo.pages%}
        {%ifequal pageNum pageInfo.curPageNum%}
            <li class="active"><a href="/Reward/incompleteList/exploits/?startIndex={{pageInfo.getPageIndex}}&firstPageNum={{pageInfo.firstPageNum}}">{{pageNum}}</a></li>
        {%else%}
            <li><a href="/Reward/incompleteList/exploits/?startIndex={{pageInfo.getPageIndex}}&firstPageNum={{pageInfo.firstPageNum}}">{{pageNum}}</a></li>
        {%endifequal%}
    {%endfor%}
    <li>
      <a href="/Reward/incompleteList/exploits/?startIndex={{pageInfo.lastPageIndex}}" aria-label="Next">
        <span aria-hidden="true">&raquo;</span>
      </a>
    </li>
  </ul>
</nav>

{% endblock %}