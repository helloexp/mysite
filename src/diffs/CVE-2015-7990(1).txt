+++ net/rds/send.c
--- net/rds/send.c
@@ -1013,11 +1013,13 @@ int rds_sendmsg(struct socket *sock, struct msghdr *msg, size_t payload_len)
 release_sock(sk);
 	}
 
-	/* racing with another thread binding seems ok here */
+	lock_sock(sk);
 if (daddr == 0 || rs->rs_bound_addr == 0) {
+		release_sock(sk);
 		ret = -ENOTCONN; /* XXX not a great errno */
 goto out;
 	}
+	release_sock(sk);
 
 if (payload_len > rds_sk_sndbuf(rs)) {
 		ret = -EMSGSIZE;
