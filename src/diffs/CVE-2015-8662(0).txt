diff --gita/libavcodec/jpeg2000dwt.cb/libavcodec/jpeg2000dwt.c
index2bf25a8..36e443d100644(file)
--- a/libavcodec/jpeg2000dwt.c
+++ b/libavcodec/jpeg2000dwt.c
@@-595,6+595,9@@int ff_dwt_encode(DWTContext *s, void *t)
 
 int ff_dwt_decode(DWTContext *s, void *t)
 {
+    if (s->ndeclevels == 0)
+        return 0;
+
     switch (s->type) {
     case FF_DWT97:
         dwt_decode97_float(s, t);
