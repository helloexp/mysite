diff --gita/libavcodec/pthread_frame.cb/libavcodec/pthread_frame.c
indexdf372e0..8987c12100644(file)
--- a/libavcodec/pthread_frame.c
+++ b/libavcodec/pthread_frame.c
@@-690,6+690,7@@int ff_frame_thread_init(AVCodecContext *avctx)
 
         copy->internal = av_malloc(sizeof(AVCodecInternal));
         if (!copy->internal) {
+            copy->priv_data = NULL;
             err = AVERROR(ENOMEM);
             goto error;
         }
