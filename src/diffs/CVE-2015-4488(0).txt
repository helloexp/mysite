# HG changeset patch
# User Daniel Holbert <dholbert@cs.stanford.edu>
# Parent  ed1ff3f3254381c036ccbe117044cef9d63765f2
Bug 1176270: Handle self-assignment in StyleAnimationValue::operator=. r=dbaron

diff --git a/layout/style/StyleAnimationValue.cpp b/layout/style/StyleAnimationValue.cpp
--- a/layout/style/StyleAnimationValue.cpp
+++ b/layout/style/StyleAnimationValue.cpp
@@ -3559,16 +3559,20 @@ StyleAnimationValue::StyleAnimationValue
 {
   mUnit = eUnit_Color;
   mValue.mColor = aColor;
 }
 
 StyleAnimationValue&
 StyleAnimationValue::operator=(const StyleAnimationValue& aOther)
 {
+  if (this == &aOther) {
+    return *this;
+  }
+
   FreeValue();
 
   mUnit = aOther.mUnit;
   switch (mUnit) {
     case eUnit_Null:
     case eUnit_Normal:
     case eUnit_Auto:
     case eUnit_None:
